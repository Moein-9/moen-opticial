import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface LanguageState {
  language: 'en' | 'ar';
  t: (key: string) => string;
  setLanguage: (language: 'en' | 'ar') => void;
}

const translations = {
  en: {
    name: 'Name',
    phoneNumber: 'Phone Number',
    dateOfBirth: 'Date of Birth',
    notes: 'Notes',
    addPatient: 'Add Patient',
    editPatient: 'Edit Patient',
    saveChanges: 'Save Changes',
    cancel: 'Cancel',
    search: 'Search',
    noPatientsFound: 'No patients found.',
    patientDetails: 'Patient Details',
    personalInfo: 'Personal Information',
    contactInfo: 'Contact Information',
    medicalHistory: 'Medical History',
    appointments: 'Appointments',
    noAppointmentsScheduled: 'No appointments scheduled.',
    addNewAppointment: 'Add New Appointment',
    date: 'Date',
    time: 'Time',
    reason: 'Reason',
    saveAppointment: 'Save Appointment',
    editAppointment: 'Edit Appointment',
    deleteAppointment: 'Delete Appointment',
    areYouSureDeleteAppointment: 'Are you sure you want to delete this appointment?',
    yesDelete: 'Yes, Delete',
    success: 'Success',
    successMessage: 'Operation completed successfully.',
    error: 'Error',
    requiredField: 'This field is required.',
    invalidPhoneNumber: 'Invalid phone number.',
    createClientTitle: 'Create New Client',
    fullName: 'Full Name',
    phone: 'Phone',
    day: 'Day',
    month: 'Month',
    year: 'Year',
    clientDidntShareDOB: 'Client didn\'t share their date of birth',
    notesPlaceholder: 'Add notes about this client...',
    prescriptionGlasses: 'Prescription Glasses',
    contactLensesTab: 'Contact Lenses',
    glassesPrescription: 'Glasses Prescription',
    prescriptionDate: 'Prescription Date',
    choosePrescriptionDate: 'Choose Prescription Date',
    rightEye: 'Right Eye',
    leftEye: 'Left Eye',
    choose: 'Choose',
    pupillaryDistance: 'Pupillary Distance',
    saveAndContinue: 'Save & Continue',
    january: 'January',
    february: 'February',
    march: 'March',
    april: 'April',
    may: 'May',
    june: 'June',
    july: 'July',
    august: 'August',
    september: 'September',
    october: 'October',
    november: 'November',
    december: 'December',
    rxAndCareInstructions: 'RX & Care Instructions',
    printPrescription: 'Print Prescription',
    newRx: 'New RX',
    currentRx: 'Current RX',
    rxHistory: 'RX History',
    actions: 'Actions',
    view: 'View',
    noPreviousRx: 'No Previous RX',
    noPreviousRxDescription: 'No previous prescriptions found for this patient.',
    glassesCareTips: 'Glasses Care Tips',
    tip1: 'Clean your glasses daily with a microfiber cloth.',
    tip2: 'Use a lens cleaner spray for stubborn smudges.',
    tip3: 'Store your glasses in a case when not in use.',
    tip4: 'Avoid placing glasses lens-down on surfaces.',
    addNewRx: 'Add New Prescription',
    addNewRxFor: 'Add new prescription for',
    dataError: 'Data Error',
    fillAllRequiredFields: 'Please fill all required fields.',
    save: 'Save',
    viewPrescription: 'View Prescription',
    close: 'Close',
    contactLensPrescription: 'Contact Lens Prescription',
    contactLensesTab: 'Contact Lenses',
    noContactLensRx: 'No contact lens prescription available for this patient.',
    axis: 'Axis',
    sphere: 'Sphere',
    cylinder: 'Cylinder',
    baseCurve: 'Base Curve',
    diameter: 'Diameter',
    right: 'Right',
    left: 'Left',
    addNewNote: 'Add New Note',
    enterNoteAboutPatient: 'Enter a note about this patient...',
    addNote: 'Add Note',
    noNotes: 'No Notes',
    addNotesToTrackInfo: 'Add notes to track important information about the patient.',
    noteCannotBeEmpty: 'Note cannot be empty.',
    noteAddedSuccessfully: 'Note added successfully.',
    searchPlaceholder: 'Search by name or phone number...',
    edit: 'Edit',
    delete: 'Delete',
    areYouSureDeletePatient: 'Are you sure you want to delete this patient?',
    no: 'No',
    editPatientDetails: 'Edit Patient Details',
    deletePatient: 'Delete Patient',
    cylAxisError: "If CYL is entered, AXIS must also be specified.",
    rightPD: "Right PD",
    leftPD: "Left PD",
  },
  ar: {
    name: 'الاسم',
    phoneNumber: 'رقم الهاتف',
    dateOfBirth: 'تاريخ الميلاد',
    notes: 'ملاحظات',
    addPatient: 'إضافة مريض',
    editPatient: 'تعديل مريض',
    saveChanges: 'حفظ التغييرات',
    cancel: 'إلغاء',
    search: 'بحث',
    noPatientsFound: 'لم يتم العثور على أي مرضى.',
    patientDetails: 'تفاصيل المريض',
    personalInfo: 'معلومات شخصية',
    contactInfo: 'معلومات الاتصال',
    medicalHistory: 'تاريخ طبي',
    appointments: 'المواعيد',
    noAppointmentsScheduled: 'لا توجد مواعيد مقررة.',
    addNewAppointment: 'إضافة موعد جديد',
    date: 'التاريخ',
    time: 'الوقت',
    reason: 'السبب',
    saveAppointment: 'حفظ الموعد',
    editAppointment: 'تعديل الموعد',
    deleteAppointment: 'حذف الموعد',
    areYouSureDeleteAppointment: 'هل أنت متأكد أنك تريد حذف هذا الموعد؟',
    yesDelete: 'نعم، احذف',
    success: 'نجاح',
    successMessage: 'تمت العملية بنجاح.',
    error: 'خطأ',
    requiredField: 'هذا الحقل مطلوب.',
    invalidPhoneNumber: 'رقم هاتف غير صالح.',
    createClientTitle: 'إنشاء عميل جديد',
    fullName: 'الاسم الكامل',
    phone: 'الهاتف',
    day: 'يوم',
    month: 'شهر',
    year: 'سنة',
    clientDidntShareDOB: 'العميل لم يشارك تاريخ ميلاده',
    notesPlaceholder: 'أضف ملاحظات حول هذا العميل...',
    prescriptionGlasses: 'نظارات طبية',
    contactLensesTab: 'عدسات لاصقة',
    glassesPrescription: 'وصفة النظارات',
    prescriptionDate: 'تاريخ الوصفة',
    choosePrescriptionDate: 'اختر تاريخ الوصفة',
    rightEye: 'العين اليمنى',
    leftEye: 'العين اليسرى',
    choose: 'اختر',
    pupillaryDistance: 'المسافة بين الحدقتين',
    saveAndContinue: 'حفظ ومتابعة',
    january: 'يناير',
    february: 'فبراير',
    march: 'مارس',
    april: 'أبريل',
    may: 'مايو',
    june: 'يونيو',
    july: 'يوليو',
    august: 'أغسطس',
    september: 'سبتمبر',
    october: 'أكتوبر',
    november: 'نوفمبر',
    december: 'ديسمبر',
    rxAndCareInstructions: 'وصفة طبية وتعليمات العناية',
    printPrescription: 'طباعة الوصفة',
    newRx: 'وصفة جديدة',
    currentRx: 'الوصفة الحالية',
    rxHistory: 'تاريخ الوصفات',
    actions: 'إجراءات',
    view: 'عرض',
    noPreviousRx: 'لا توجد وصفات سابقة',
    noPreviousRxDescription: 'لم يتم العثور على وصفات طبية سابقة لهذا المريض.',
    glassesCareTips: 'نصائح للعناية بالنظارات',
    tip1: 'نظف نظارتك يوميًا بقطعة قماش من الألياف الدقيقة.',
    tip2: 'استخدم رذاذ تنظيف العدسات للبقع الصعبة.',
    tip3: 'خزن نظارتك في علبة عندما لا تكون قيد الاستخدام.',
    tip4: 'تجنب وضع النظارات على العدسة لأسفل على الأسطح.',
    addNewRx: 'إضافة وصفة جديدة',
    addNewRxFor: 'إضافة وصفة جديدة لـ',
    dataError: 'خطأ في البيانات',
    fillAllRequiredFields: 'يرجى ملء جميع الحقول المطلوبة.',
    save: 'حفظ',
    viewPrescription: 'عرض الوصفة',
    close: 'إغلاق',
    contactLensPrescription: 'وصفة العدسات اللاصقة',
    contactLensesTab: 'عدسات لاصقة',
    noContactLensRx: 'لا توجد وصفة عدسات لاصقة متاحة لهذا المريض.',
    axis: 'محور',
    sphere: 'كرة',
    cylinder: 'اسطوانة',
    baseCurve: 'انحناء القاعدة',
    diameter: 'قطر',
    right: 'يمين',
    left: 'يسار',
    addNewNote: 'إضافة ملاحظة جديدة',
    enterNoteAboutPatient: 'أدخل ملاحظة حول هذا المريض...',
    addNote: 'أضف ملاحظة',
    noNotes: 'لا توجد ملاحظات',
    addNotesToTrackInfo: 'أضف ملاحظات لتتبع المعلومات الهامة حول المريض.',
    noteCannotBeEmpty: 'لا يمكن أن تكون الملاحظة فارغة.',
    noteAddedSuccessfully: 'تمت إضافة الملاحظة بنجاح.',
    searchPlaceholder: 'ابحث بالاسم أو رقم الهاتف...',
    edit: 'تعديل',
    delete: 'حذف',
    areYouSureDeletePatient: 'هل أنت متأكد أنك تريد حذف هذا المريض؟',
    no: 'لا',
    editPatientDetails: 'تعديل تفاصيل المريض',
    deletePatient: 'حذف المريض',
    cylAxisError: "إذا تم إدخال قيمة الأسطوانة، يجب أيضًا تحديد المحور.",
    rightPD: "PD الأيمن",
    leftPD: "PD الأيسر",
  }
};

const useLanguageStore = create<LanguageState>()(
  persist(
    (set, get) => ({
      language: 'en',
      t: (key: string) => {
        const lang = get().language;
        return translations[lang][key] || key;
      },
      setLanguage: (language: 'en' | 'ar') => set({ language }),
    }),
    {
      name: 'language-storage',
      storage: typeof window !== 'undefined' ? localStorage : undefined,
    }
  )
);

export { useLanguageStore };
